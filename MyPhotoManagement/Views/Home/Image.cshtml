<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    @*<meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />*@
    <title>相册纪念页</title>
    <script src="~/Scripts/jquery-1.8.2.min.js"></script>
    <style type="text/css">
        body, .container {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            background-size: contain;
        }

        .header {
            background-color: #f8d9d9;
            width: 100%;
            position: absolute;
            height: 10%;
        }

        /*翻转*/
        .div_xiang {
            transform: scale(-1,1);
        }

        .center {
            background-color: #f8d9d9;
            width: 100%;
            position: absolute;
            top: 10%;
            height: 63%;
            text-align: center;
            margin: auto 0;
        }

        .bottom {
            background-color: #f8d9d9;
            width: 100%;
            position: absolute;
            top: 73%;
            bottom: 0px;
        }

        .div_music {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1;
            height: 20px;
            width: 20px;
        }

        .title {
            /*position: absolute;*/
            top: 0;
            left: 5px;
            z-index: 1;
            height: 100%;
            vertical-align: bottom;
            width: 60%;
            /*background-color: #808080;*/
            margin: auto 0;
        }

        .div_photo {
            height: 98%;
            width: 80%;
            background-color: #f8d9d9;
            margin: 5px auto;
        }

        .photo {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            vertical-align: bottom;
            border-radius: 25px;
        }

        .xiang {
            position: absolute;
            top: 0px;
            left: 10%;
            z-index: 1;
            height: 100%;
            width: 80%;
            border-radius: 20px;
        }

        .div_photo_h {
            height: 60%;
            width: 90%;
            background-color: #f8d9d9;
            top: 20%;
            left: 5%;
            border-radius: 20px;
            position: absolute;
        }

        .photo_h {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            height: 100%;
            width: 100%;
            border-radius: 25px;
        }

        .xiang_h {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 2;
            height: 100%;
            width: 100%;
            border-radius: 20px;
        }


        .jiao1 {
            position: absolute;
            top: -5px;
            left: 10%;
            z-index: 1;
            height: 100%;
            width: 80%;
        }

        .open {
            transform: rotate(30deg);
            -ms-transform: rotate(30deg); /* IE 9 */
            -moz-transform: rotate(30deg); /* Firefox */
            -webkit-transform: rotate(30deg); /* Safari and Chrome */
            -o-transform: rotate(30deg); /* Opera style="visibility:hidden"*/
        }

        .div_bot_ph {
            position: absolute;
            bottom: 5px;
            right: 5px;
            z-index: 1;
            height: 150px;
            width: 150px;
            /*background-color: #b6ff00;*/
        }

        .div_bot_font {
            position: absolute;
            top: 5px;
            left: 5px;
            z-index: 1;
            height: 100%;
            width: 80%;
            /*background-color: #e49e6d;*/
        }

        .title_le_img {
            height: 30px;
            width: 30px;
            transform: rotateY(180deg);
        }

        .title_ri_img {
            height: 30px;
            width: 30px;
        }
    </style>
</head>
<body>
    <div class="header">
        <img id="imgMuc" class="div_music" src="~/images/music1.png" onclick="playOrPause()" />
        <div class="title">
            <label style="position: absolute; bottom: 5px; left: 10px; font-family: YouYuan; font-size: 30px; font-weight: bold"><img class="title_le_img" src="/photo/title.png" />哈哈哈<img class="title_ri_img" src="~/photo/title.png" /></label>
        </div>
    </div>
    <div class="center">
        <div id="div_photo" class="div_photo_h">
            <img id="xiang" class="xiang_h" src="/photo/xiang_h1.png" />
            <img id="photo" class="photo_h" />
        </div>
    </div>
    <div class="bottom">
        <div class="div_bot_font">
            <marquee direction=up behavior=scroll scrollamount=1 scrolldelay=10 align="left" style="position: absolute;top: 15px; left: 15px;height:80%;width:200px;font-size: 15px;font-weight:bold ">
                <p>我试试</p>
                <p>第一段</p>
                <p style="text-indent:1em;"> MARQUEE 元素的默认宽度与其父元素的宽度相等。如果 MARQUEE 位于没有指定宽度的 TD 内，你就需要明确设置 MARQUEE 的宽度。如果 MARQUEE 和 TD 的宽度都没有指定，那么滚动字幕就将限定于 1 个像素宽。</p>
                <p>第三段</p>
                <p>第四段</p>
            </marquee>
        </div>
        <div class="div_bot_ph">
            <img id="bot_img" style="height: 100%; width: 100%; position: absolute;" src="~/photo/dong3.gif" />
        </div>

    </div>
    <div style="visibility: hidden">
        <audio id="auMusic" autoplay="autoplay" src="~/audio/mp3/1.mp3">
            does not support.
        </audio>
    </div>
    <script type="text/javascript">


        var aud = document.getElementById("auMusic");

        function playOrPause() {
            if (aud.paused) {
                aud.play();
            } else {
                aud.pause();
            }
        }

        var root = 2;
        aud.loop = false;
        aud.addEventListener('ended',
            function () {

                $("#auMusic").attr("src", "/audio/mp3/" + root + ".mp3");
                root += 1;
                if (root > 7) {
                    root = 1;
                }
            },
            false);


    </script>

    @*定时器*@
    <script type="text/javascript">


        //图片转换
        var bot_num = 2;
        setInterval(function () {
            $("#bot_img").fadeOut(500, function () {
                {
                    $("#bot_img").attr("src", "/photo/dong" + bot_num + ".gif");
                }
            });
            $("#bot_img").fadeIn(300);
            bot_num++;
            if (bot_num > 3) {
                bot_num = 1;
            }
        },
            16000);

        var dataList = [];
        $(function () {

            $.ajax({
                url: '/Home/getImageList',
                type: 'Post',
                //data: { strbase: '1231' },
                dataType: 'json',
                success: function (data) {
                    dataList = data;
                    $("#photo").attr("src", "/photo/wo/" + dataList[0]);
                }
            })
        })


        //图片转换
        var num = 1;
        var num_xiang = 1;
        var num_xiang_h = 1;
        var loop_photo = 6;
        setInterval(function () {
            var image = new Image();
            image.src = "/photo/wo/" + dataList[num];

            $("#div_photo").fadeOut(800, function () {
                $("#photo").attr("src", "/photo/wo/" + dataList[num]);
                num++;

                if (image.width > image.height) {
                    $("#div_photo").attr("class", "div_photo_h");
                    $("#xiang").attr("class", "xiang_h");
                    $("#photo").attr("class", "photo_h");
                    $("#xiang").attr("src", "/photo/xiang_h" + num_xiang_h + ".png");
                    if (parseInt(num % loop_photo) == 0) {
                        num_xiang_h++;
                    }

                } else {
                    $("#div_photo").attr("class", "div_photo");
                    $("#xiang").attr("class", "xiang");
                    $("#photo").attr("class", "photo");
                    $("#xiang").attr("src", "/photo/xiang" + num_xiang + ".png");
                    if (parseInt(num % loop_photo) == 0) {
                        num_xiang++;
                    }
                }


                if (num >= dataList.length) {
                    num = 0;
                }
                if (num_xiang > 4) {
                    num_xiang = 1;
                }
                if (num_xiang_h > 3) {
                    num_xiang_h = 1;
                }
                $("#div_photo").fadeIn(600);
            })
        },
            5000);

        //图标旋转
        var cor = 5;
        setInterval(function () {
            $("#imgMuc").css("transform", "rotate(" + cor + "deg)");
            $("#imgMuc").css("-ms-transform", "rotate(" + cor + "deg)");
            $("#imgMuc").css("-moz-transform", "rotate(" + cor + "deg)");
            $("#imgMuc").css("-webkit-transform", "rotate(" + cor + "deg)");
            $("#imgMuc").css("-o-transform", "rotate(" + cor + "deg)");
            cor += 5;
            if (cor > 360) {
                cor = 5;
            }
        },
            80);
    </script>

    @*全屏*@
    <script type="text/javascript">
        var full = 0;
        $("#div_photo").click(function () {
            if (full == 0) {
                fullscreen();
                full = 1;
            } else {
                exitFullscreen();
                full = 0;
            }
        });

        // 全屏
        function fullscreen() {
            var docElm = document.documentElement;
            if (docElm.requestFullscreen) {
                docElm.requestFullscreen();
            } else if (docElm.mozRequestFullScreen) {
                docElm.mozRequestFullScreen();
            } else if (docElm.webkitRequestFullScreen) {
                docElm.webkitRequestFullScreen();
            } else if (docElm.msRequestFullscreen) {
                docElm.msRequestFullscreen();
            }
        }

        // 退出全屏
        function exitFullscreen() {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.mozCancelFullScreen) {
                document.mozCancelFullScreen();
            } else if (document.webkitCancelFullScreen) {
                document.webkitCancelFullScreen();
            } else if (document.msExitFullscreen) {
                document.msExitFullscreen();
            }
        }

        // 监听是否全屏
        window.onload = function () {
            var elem = document.getElementById('photo');
            document.addEventListener('fullscreenchange',
                function () {
                    elem.innerText = document.fullscreen ? 'yes' : 'no';
                },
                false);
            document.addEventListener('mozfullscreenchange',
                function () {
                    elem.innerText = document.mozFullScreen ? 'yes' : 'no';
                },
                false);
            document.addEventListener('webkitfullscreenchange',
                function () {
                    elem.innerText = document.webkitIsFullScreen ? 'yes' : 'no';
                },
                false);
            document.addEventListener('msfullscreenchange',
                function () {
                    elem.innerText = document.msFullscreenElement ? 'yes' : 'no';
                },
                false);
        }
    </script>
</body>
</html>
